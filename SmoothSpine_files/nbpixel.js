// Newsbreak Pixel v1.0.0 | MIT License
!function(r,s,n){"use strict";function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){var y,d,e="function"==typeof Symbol?Symbol:{},t=e.iterator||"@@iterator",n=e.toStringTag||"@@toStringTag";function r(e,t,n,r){var i,o,a,u,c,s,f,l,p,m=t&&t.prototype instanceof g?t:g,h=Object.create(m.prototype);return k(h,"_invoke",(i=e,o=n,f=r||[],l=!1,p={p:s=0,n:0,v:y,a:v,f:v.bind(y,4),d:function(e,t){return a=e,u=0,c=y,p.n=t,b}},function(e,t,n){if(1<s)throw TypeError("Generator is already running");for(l&&1===t&&v(t,n),u=t,c=n;(d=u<2?y:c)||!l;){a||(u?u<3?(1<u&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,a){if(u||(e="next"),d=a[e]){if(!(d=d.call(a,c)))throw TypeError("iterator result is not an object");if(!d.done)return d;c=d.value,u<2&&(u=0)}else 1===u&&(d=a.return)&&d.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),u=1);a=y}else if((d=(l=p.n<0)?c:i.call(o,p))!==b)break}catch(e){a=y,u=1,c=e}finally{s=1}}return{value:d,done:l}}),!0),h;function v(e,t){for(u=e,c=t,d=0;!l&&s&&!n&&d<f.length;d++){var n,r=f[d],i=p.p,o=r[2];3<e?(n=o===t)&&(c=r[(u=r[4])?5:u=3],r[4]=r[5]=y):r[0]<=i&&((n=e<2&&i<r[1])?(u=0,p.v=t,p.n=r[1]):i<o&&(n=e<3||r[0]>t||o<t)&&(r[4]=e,r[5]=t,p.n=o,u=0))}if(n||1<e)return b;throw l=!0,t}}var b={};function g(){}function i(){}function o(){}d=Object.getPrototypeOf;var a=[][t]?d(d([][t]())):(k(d={},t,function(){return this}),d),u=o.prototype=g.prototype=Object.create(a);function c(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,k(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return k(u,"constructor",i.prototype=o),k(o,"constructor",i),k(o,n,i.displayName="GeneratorFunction"),k(u),k(u,n,"Generator"),k(u,t,function(){return this}),k(u,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function k(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(k=function(e,t,n,r){function i(t,n){k(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))})(e,t,n,r)}function c(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return n(e),0}u.done?t(c):Promise.resolve(c).then(r,i)}function u(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function i(e){c(r,t,n,i,o,"next",e)}function o(e){c(r,t,n,i,o,"throw",e)}i(void 0)})}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(t)?t:t+""}var b={id:"",params:{},version:20251215164622,buildTime:"Mon Dec 15 2025 16:46:23 GMT-0800 (Pacific Standard Time)"},g=function(){function i(){m(this,i)}return v(i,null,[{key:"isPresent",value:function(e){return null!=e&&""!==e}},{key:"now",value:function(){return+new Date}},{key:"guid",value:function(){return b.version+"-xxxxxxxx-".replace(/[x]/g,function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)})+(+new Date).toString(36)}},{key:"hashEmailOrPhone",value:(n=u(p().m(function e(t){var n,r,i,o,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=new TextEncoder,r=n.encode(t),e.n=1,crypto.subtle.digest("SHA-256",r);case 1:return i=e.v,o=Array.from(new Uint8Array(i)),a=o.map(function(e){return e.toString(16).padStart(2,"0")}).join(""),e.a(2,a);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return n.apply(this,arguments)})},{key:"optionalData",value:(t=u(p().m(function e(t){var n,r;return p().w(function(e){for(;;)switch(e.n){case 0:if(!1===i.isPresent(t))return e.a(2,"");e.n=1;break;case 1:if("object"!==a(t)){e.n=9;break}if(!t.em||i.looksLikeSha256Hex(t.em)){e.n=4;break}if(n=i.normalizeEmail(t.em),i.isValidEmail(n))return e.n=2,i.hashEmailOrPhone(n);e.n=3;break;case 2:t.em=e.v,e.n=4;break;case 3:t.em=i.Invalid;case 4:if(!t.ph||i.looksLikeSha256Hex(t.ph)){e.n=7;break}if(r=i.normalizePhoneNumber(t.ph),i.isValidPhone(r))return e.n=5,i.hashEmailOrPhone(r);e.n=6;break;case 5:t.ph=e.v,e.n=7;break;case 6:t.ph=i.Invalid;case 7:return e.n=8,i.optionalData(JSON.stringify(t));case 8:return e.a(2,e.v);case 9:if("function"==typeof t)return e.n=10,i.optionalData(t());e.n=11;break;case 10:return e.a(2,e.v);case 11:return e.a(2,String(t));case 12:return e.a(2)}},e)})),function(e){return t.apply(this,arguments)})},{key:"hashToBucket",value:function(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)>>>0;return t%100+1}},{key:"looksLikeSha256Hex",value:function(e){return"string"==typeof e&&/^[a-f0-9]{64}$/i.test(e)}},{key:"isValidEmail",value:function(e){return"string"==typeof e&&/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e.trim())}},{key:"isValidPhone",value:function(e){var t=/^\d+$/.test(e),n=6<=e.length&&e.length<=15;return t&&n}},{key:"normalizePhoneNumber",value:function(e){var t=e.trim();return t=(t=t.replace(/\D+/g,"")).replace(/^0+/,"")}},{key:"normalizeEmail",value:function(e){return e.trim().toLowerCase()}}]);var t,n}();y(g,"Invalid","INVALID");var O=function(){return v(function e(){m(this,e)},null,[{key:"nameAndVersion",value:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in s}},{key:"userAgent",value:function(){return r.navigator.userAgent}}])}(),w=function(){return v(function e(){m(this,e)},null,[{key:"prefix",value:function(){return"__".concat("nbpix","_")}},{key:"set",value:function(e,t,n,r){var i,o=3<arguments.length&&void 0!==r?r:"/",a="";g.isPresent(n)&&((i=new Date).setTime(i.getTime()+60*n*1e3),a="expires=".concat(i.toGMTString(),"; ")),s.cookie="".concat(this.prefix()).concat(e,"=").concat(t,"; ").concat(a,"path=").concat(o,"; SameSite=Lax; domain=").concat(location.hostname.split(".").slice(-2).join("."))}},{key:"get",value:function(e){for(var e="".concat(this.prefix()).concat(e,"="),t=s.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}}},{key:"delete",value:function(e){this.set(e,"",-100)}},{key:"exists",value:function(e){return g.isPresent(this.get(e))}},{key:"setUtms",value:function(){for(var e=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],t=!1,n=0,r=e.length;n<r;n++)if(g.isPresent(P.getParameterByName(e[n]))){t=!0;break}if(t){for(var i,o={},n=0,r=e.length;n<r;n++)i=P.getParameterByName(e[n]),g.isPresent(i)&&(o[e[n]]=i);this.set("utm",JSON.stringify(o))}}},{key:"getUtm",value:function(e){if(this.exists("utm")){var t=JSON.parse(this.get("utm"));return e in t?t[e]:""}}},{key:"setNbs",value:function(){for(var e=["nb_aid","nb_fid","nb_cid"],t=!1,n=0,r=e.length;n<r;n++)if(g.isPresent(P.getParameterByName(e[n]))){t=!0;break}if(t){for(var i,o={},n=0,r=e.length;n<r;n++)i=P.getParameterByName(e[n]),g.isPresent(i)&&(o[e[n]]=i);this.set("nb",JSON.stringify(o))}}},{key:"getNb",value:function(e){if(this.exists("nb")){var t=JSON.parse(this.get("nb"));return e in t?t[e]:""}}},{key:"setNbLongTime",value:function(){for(var e=["nn_uid"],t=!1,n=0,r=e.length;n<r;n++)if(g.isPresent(P.getParameterByName(e[n]))){t=!0;break}if(t){for(var i,o={},n=0,r=e.length;n<r;n++)i=P.getParameterByName(e[n]),g.isPresent(i)&&(o[e[n]]=i);this.set("nb_long",JSON.stringify(o),1051200)}}},{key:"getNbLongTime",value:function(e){if(this.exists("nb_long")){var t=JSON.parse(this.get("nb_long"));return e in t?t[e]:""}}}])}();y(w,"set3rdPartyCookie",function(){var e=s.createElement("iframe");e.id="nbu-iframe",e.style.display="none",e.src="https://id-msp.newsbreak.com/sync-nbu?source=2&host="+r.location.hostname,s.body.appendChild(e)}),y(w,"getFirstParty",function(){try{var e,t=["_fbp","_ga"],n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(s.cookie.split("; "));try{for(r.s();!(e=r.n()).done;){var i,o=f(e.value.split("="),2),a=o[0],u=o[1];t.includes(a)&&(i=decodeURIComponent(u),n[a]=i)}}catch(e){r.e(e)}finally{r.f()}if(!Object.keys(n).length)return"";var c=JSON.stringify(n);return btoa(c)}catch(e){return console.log("fpc error",e),""}});var P=function(){return v(function e(){m(this,e)},null,[{key:"getParameterByName",value:function(e,t){t=t||r.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"externalHost",value:function(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")}}])}(),S=function(){return v(function e(t,n,r){var i=this;m(this,e),this.paramsMap={},this.event=t,this.timestamp=n,this.optional=r,this.buildParams().then(function(){i.send()})},[{key:"buildParams",value:(e=u(p().m(function e(){var t,n,r,i,o;return p().w(function(e){for(;;)switch(e.n){case 0:t=this.getAttribute(),i=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}(t);case 1:if((o=i()).done){e.n=4;break}if(n=o.value,t.hasOwnProperty(n))return e.n=2,t[n](n);e.n=3;break;case 2:r=e.v,this.setParam(n,r);case 3:e.n=1;break;case 4:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getAttribute",value:function(){var t=this;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){y(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({id:function(){return b.id},uid:function(){return w.get("uid")},ev:function(){return t.event},ed:function(){return g.optionalData(t.optional)},v:function(){return b.version},dl:function(){return r.location.href},rl:function(){return s.referrer},ts:function(){return t.timestamp},de:function(){return s.characterSet},sr:function(){return r.screen.width+"x"+r.screen.height},vp:function(){return r.innerWidth+"x"+r.innerHeight},cd:function(){return r.screen.colorDepth},dt:function(){return s.title},bn:function(){return O.nameAndVersion()},md:function(){return O.isMobile()},ua:function(){return O.userAgent()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(e){return w.getUtm(e)},utm_medium:function(e){return w.getUtm(e)},utm_term:function(e){return w.getUtm(e)},utm_content:function(e){return w.getUtm(e)},utm_campaign:function(e){return w.getUtm(e)},nb_aid:function(e){return w.getNb(e)},nb_fid:function(e){return w.getNb(e)},nb_cid:function(e){return w.getNb(e)},nn_uid:function(e){return w.getNbLongTime(e)},duration_ms:function(){var e=t.timestamp-n.t;return"number"!=typeof e||isNaN(e)?"":e}},b.params)}},{key:"setParam",value:function(e,t){g.isPresent(t)?this.paramsMap[e]=String(t):this.paramsMap[e]=""}},{key:"send",value:function(){r.navigator.sendBeacon?this.sendBeacon():this.sendFetch()}},{key:"sendBeacon",value:function(){r.navigator.sendBeacon(this.getSourceUrl(),JSON.stringify(this.paramsMap))}},{key:"sendFetch",value:function(){fetch(this.getSourceUrl(),{method:"POST",body:JSON.stringify(this.paramsMap),mode:"no-cors",credentials:"include"})}},{key:"getSourceUrl",value:function(){return"https://business.newsbreak.com/tracking/pixelv2"}}]);var e}();w.exists("uid")?w.set("uid",w.get("uid"),1051200):w.set("uid",g.guid(),1051200),w.set3rdPartyCookie(),w.setUtms(),w.setNbs(),w.setNbLongTime();function e(){b.setUpOnce=!0,n.t||(n.t=g.now()),n.process=function(e,t,n,r){"init"===e?(b.id=t,b.initOnce||(b.initOnce=!0,new S("pixelinit",g.now(),n),"function"==typeof r&&r("pixelinit"))):"param"===e?b.params[t]=function(){return n}:"event"===e&&("pageload"!==t||b.pageLoadOnce?"pageload"!==t&&"pageclose"!==t&&new S(t,g.now(),n):(b.pageLoadOnce=!0,new S(t,g.now(),n)))};for(var e=0,t=n.queue.length;e<t;e++)n.process.apply(n,n.queue[e]);r.addEventListener("unload",function(){b.pageCloseOnce||(b.pageCloseOnce=!0,new S("pageclose",g.now(),function(){if(g.isPresent(b.externalHost)&&g.now()-b.externalHost.time<5e3)return b.externalHost.link}))}),r.onload=function(){for(var e=s.getElementsByTagName("a"),t=0,n=e.length;t<n;t++)e[t].addEventListener("click",function(e){P.externalHost(this)&&(b.externalHost={link:this.href,time:g.now()})}.bind(e[t]));for(var r=s.querySelectorAll("[data-nbpix-event]"),t=0,n=r.length;t<n;t++)r[t].addEventListener("click",function(e){var t=this.getAttribute("data-nbpix-event");t&&new S(t,g.now(),this.getAttribute("data-nbpix-data"))}.bind(r[t]))}}s.getElementById("nbu-iframe").addEventListener("load",function(){b.setUpOnce||e()}),setTimeout(function(){b.setUpOnce||e()},500)}(window,document,window.nbpix);